Version 4
SHEET 1 2104 1444
WIRE -688 -752 -704 -752
WIRE -576 -752 -608 -752
WIRE -448 -752 -576 -752
WIRE -112 -752 -448 -752
WIRE 16 -752 -112 -752
WIRE 608 -752 16 -752
WIRE 624 -752 608 -752
WIRE 752 -752 704 -752
WIRE -112 -736 -112 -752
WIRE 16 -736 16 -752
WIRE 608 -736 608 -752
WIRE -576 -720 -576 -752
WIRE -448 -720 -448 -752
WIRE -704 -704 -704 -752
WIRE -512 -704 -704 -704
WIRE -704 -688 -704 -704
WIRE -512 -672 -512 -704
WIRE 608 -656 608 -672
WIRE 272 -624 -128 -624
WIRE -704 -608 -704 -624
WIRE -576 -608 -576 -624
WIRE -544 -608 -576 -608
WIRE -448 -608 -448 -624
WIRE -448 -608 -480 -608
WIRE -176 -608 -448 -608
WIRE -576 -592 -576 -608
WIRE -320 -592 -576 -592
WIRE 272 -576 272 -624
WIRE 384 -576 272 -576
WIRE 480 -576 448 -576
WIRE 528 -576 480 -576
WIRE 1056 -576 928 -576
WIRE 1072 -576 1056 -576
WIRE -320 -560 -320 -592
WIRE -176 -560 -320 -560
WIRE -576 -528 -576 -592
WIRE -576 -528 -640 -528
WIRE -448 -528 -448 -608
WIRE -384 -528 -448 -528
WIRE 928 -528 928 -576
WIRE -128 -512 -128 -544
WIRE -576 -496 -576 -528
WIRE -448 -496 -448 -528
WIRE -1664 -464 -1664 -480
WIRE -640 -448 -640 -528
WIRE -384 -448 -384 -528
WIRE 528 -448 528 -576
WIRE 928 -432 928 -448
WIRE -576 -384 -576 -400
WIRE -544 -384 -576 -384
WIRE -448 -384 -448 -400
WIRE -448 -384 -480 -384
WIRE -1664 -368 -1664 -384
WIRE -576 -352 -576 -384
WIRE -576 -352 -640 -352
WIRE -448 -352 -448 -384
WIRE -384 -352 -448 -352
WIRE 528 -352 528 -368
WIRE 528 -352 448 -352
WIRE -576 -336 -576 -352
WIRE -448 -336 -448 -352
WIRE 528 -336 528 -352
WIRE -640 -288 -640 -352
WIRE -384 -288 -384 -352
WIRE -576 -224 -576 -240
WIRE -544 -224 -576 -224
WIRE -448 -224 -448 -240
WIRE -448 -224 -480 -224
WIRE 528 -224 528 -256
WIRE -576 -192 -576 -224
WIRE -576 -192 -640 -192
WIRE -448 -192 -448 -224
WIRE -384 -192 -448 -192
WIRE -576 -176 -576 -192
WIRE -448 -176 -448 -192
WIRE -1664 -160 -1664 -192
WIRE 144 -144 144 -160
WIRE -640 -128 -640 -192
WIRE -384 -128 -384 -192
WIRE 144 -112 144 -144
WIRE -576 -64 -576 -80
WIRE -544 -64 -576 -64
WIRE -448 -64 -448 -80
WIRE -448 -64 -480 -64
WIRE 240 -64 208 -64
WIRE 352 -64 320 -64
WIRE 448 -64 448 -352
WIRE 448 -64 416 -64
WIRE -576 -32 -576 -64
WIRE -448 -32 -448 -64
WIRE 240 -16 240 -64
WIRE 736 0 656 0
WIRE -1040 16 -1120 16
WIRE -912 16 -960 16
WIRE -768 16 -848 16
WIRE -640 16 -768 16
WIRE -320 16 -384 16
WIRE -240 16 -320 16
WIRE -112 16 -160 16
WIRE 144 16 144 -16
WIRE 144 16 -48 16
WIRE 656 16 656 0
WIRE 736 16 736 0
WIRE 144 32 144 16
WIRE -1120 48 -1120 16
WIRE -496 64 -576 64
WIRE -448 64 -496 64
WIRE 240 80 240 64
WIRE 336 80 240 80
WIRE 480 80 416 80
WIRE -768 112 -768 16
WIRE -640 112 -688 112
WIRE -448 112 -640 112
WIRE -320 112 -320 16
WIRE -320 112 -368 112
WIRE 240 112 240 80
WIRE 656 112 656 80
WIRE 656 128 656 112
WIRE -1120 144 -1120 128
WIRE -496 160 -496 64
WIRE 144 160 144 112
WIRE -768 208 -816 208
WIRE -640 208 -640 112
WIRE -640 208 -688 208
WIRE 240 208 240 176
WIRE -640 224 -640 208
WIRE 656 224 656 192
WIRE 656 224 528 224
WIRE 1072 272 1072 256
WIRE -496 288 -496 240
WIRE -256 288 -368 288
WIRE -48 288 -256 288
WIRE 96 288 32 288
WIRE 336 288 176 288
WIRE -640 320 -640 288
WIRE -368 336 -368 288
WIRE -368 336 -432 336
WIRE 1072 336 1072 272
WIRE -368 352 -368 336
WIRE 1072 352 1072 336
WIRE -240 368 -272 368
WIRE -128 368 -240 368
WIRE -48 368 -128 368
WIRE 64 368 32 368
WIRE -272 400 -272 368
WIRE -272 400 -304 400
WIRE 656 400 656 304
WIRE -272 416 -272 400
WIRE 336 416 336 288
WIRE 960 416 336 416
WIRE -624 432 -688 432
WIRE -128 448 -128 368
WIRE -48 448 -128 448
WIRE 528 448 528 224
WIRE 528 448 32 448
WIRE 960 448 960 416
WIRE 1072 448 1072 416
WIRE 1072 448 960 448
WIRE 1088 448 1072 448
WIRE -624 464 -624 432
WIRE -496 480 -496 384
WIRE -416 480 -496 480
WIRE -368 480 -368 448
WIRE -368 480 -416 480
WIRE 656 512 656 480
WIRE -496 528 -496 480
WIRE -368 560 -368 480
WIRE -272 560 -272 496
WIRE -272 560 -368 560
WIRE 896 560 224 560
WIRE 912 560 896 560
WIRE 1072 560 1072 528
WIRE 1072 560 976 560
WIRE -624 576 -624 544
WIRE -560 576 -624 576
WIRE 1072 576 1072 560
WIRE -624 608 -624 576
WIRE 656 624 656 576
WIRE 1008 672 720 672
WIRE 416 688 144 688
WIRE -624 720 -624 688
WIRE -496 720 -496 624
WIRE 1008 752 1008 672
WIRE 416 768 416 688
WIRE 1008 768 1008 752
WIRE 416 784 416 768
WIRE 656 848 656 624
WIRE 1008 848 1008 832
WIRE 1008 848 656 848
WIRE 64 864 64 368
WIRE 416 864 416 848
WIRE 416 864 64 864
WIRE 1008 864 1008 848
WIRE 416 880 416 864
WIRE -272 976 -272 560
WIRE 224 976 224 560
WIRE 224 976 -272 976
WIRE 272 976 224 976
WIRE 416 976 416 960
WIRE 416 976 352 976
WIRE 1008 992 1008 944
WIRE 656 1104 656 848
WIRE 656 1104 416 1104
WIRE 64 1184 -48 1184
WIRE 144 1184 144 688
WIRE 144 1184 64 1184
WIRE -48 1200 -48 1184
WIRE 432 1296 336 1296
WIRE 720 1296 720 672
WIRE 720 1296 432 1296
WIRE -48 1312 -48 1280
WIRE 336 1424 336 1296
FLAG -1664 -160 0
FLAG -1664 -368 0
FLAG -1664 -272 5.33V
FLAG 608 -656 0
FLAG -704 -608 0
FLAG -1664 -480 12V
FLAG 752 -752 12V
FLAG 480 -576 out_vcf
FLAG 240 208 0
FLAG 480 80 5.33V
FLAG 144 -144 12V
FLAG 144 160 0
FLAG -640 320 0
FLAG -816 208 5.33V
FLAG -1120 144 0
FLAG -1120 16 in
FLAG 528 -224 0
FLAG -768 16 in+
FLAG -320 16 in-
FLAG -624 720 0
FLAG -496 720 0
FLAG -624 432 5.33V
FLAG 736 16 0
FLAG 656 624 acc
FLAG 1008 992 0
FLAG 1072 272 12V
FLAG 432 1296 ACCENT
FLAG 64 1184 ENV_IN
FLAG -256 288 b16
FLAG -416 480 e16
FLAG -240 368 b17
FLAG -128 -512 0
FLAG -48 1312 0
FLAG 336 1424 0
FLAG 928 -432 0
FLAG 1056 -576 out
SYMBOL voltage -1664 -288 R0
SYMATTR InstName V1
SYMATTR Value 5.333
SYMBOL voltage -1664 -480 R0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL npn -640 -32 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL npn -384 -32 M0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL cap -480 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.018µ
SYMBOL npn -640 -176 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL npn -384 -176 M0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL cap -480 -240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.033µ
SYMBOL npn -640 -336 R0
SYMATTR InstName Q5
SYMATTR Value 2N3904
SYMBOL npn -384 -336 M0
SYMATTR InstName Q6
SYMATTR Value 2N3904
SYMBOL cap -480 -400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.033µ
SYMBOL npn -640 -496 R0
SYMATTR InstName Q7
SYMATTR Value 2N3904
SYMBOL npn -384 -496 M0
SYMATTR InstName Q8
SYMATTR Value 2N3904
SYMBOL cap -480 -624 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.033µ
SYMBOL npn -512 -720 M0
SYMATTR InstName Q9
SYMATTR Value 2N3904
SYMBOL npn -512 -720 R0
SYMATTR InstName Q10
SYMATTR Value 2N3904
SYMBOL res 608 -736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL cap 592 -736 R0
SYMATTR InstName C5
SYMATTR Value 47µ
SYMBOL res -704 -736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL cap -688 -688 M0
SYMATTR InstName C6
SYMATTR Value 10µ
SYMBOL cap 384 -560 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C10
SYMATTR Value 1µ
SYMBOL cap 352 -48 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C11
SYMATTR Value 1µ
SYMBOL res 224 -48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 2.2k
SYMBOL res 224 -32 R0
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res 320 96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL cap 224 112 R0
SYMATTR InstName C12
SYMATTR Value 1µ
SYMBOL npn 208 -112 M0
SYMATTR InstName Q15
SYMATTR Value 2N3904
SYMBOL res 160 16 M0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap -112 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C13
SYMATTR Value 1µ
SYMBOL res -144 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res -464 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 2.2k
SYMBOL res -784 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R18
SYMATTR Value 2.2k
SYMBOL res -784 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 2.2k
SYMBOL cap -656 224 R0
SYMATTR InstName C14
SYMATTR Value 10µ
SYMBOL res -1056 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 220k
SYMBOL voltage -1120 32 M0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V3
SYMATTR Value PULSE(12 5.5 0 15m 0 0 15m)
SYMBOL res 512 -352 R0
SYMATTR InstName R21
SYMATTR Value {x*Rpot}
SYMBOL res 512 -352 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R22
SYMATTR Value {(1-x)*Rpot}
SYMBOL cap -912 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C15
SYMATTR Value 1µ
SYMBOL npn -432 288 M0
SYMATTR InstName Q16
SYMATTR Value 2N3904
SYMBOL res -512 144 R0
SYMATTR InstName R23
SYMATTR Value 2.2k
SYMBOL pnp -304 448 R180
SYMATTR InstName Q17
SYMATTR Value 2N3906
SYMBOL pnp -560 624 M180
SYMATTR InstName Q18
SYMATTR Value 2N3906
SYMBOL res -640 448 R0
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL res -640 592 R0
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL res -288 400 R0
SYMATTR InstName R26
SYMATTR Value 2.2k
SYMBOL res 48 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 100k
SYMBOL res 48 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 220k
SYMBOL res 48 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 100k
SYMBOL res 640 208 R0
SYMATTR InstName R30
SYMATTR Value {x*Rpot}
SYMBOL res 640 208 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R31
SYMATTR Value {(1-x)*Rpot}
SYMBOL diode 672 576 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL cap 640 16 R0
SYMATTR InstName C16
SYMATTR Value 1µ
SYMBOL res 640 384 R0
SYMATTR InstName R32
SYMATTR Value 47k
SYMBOL res 400 864 R0
SYMATTR InstName R33
SYMATTR Value {w*Rpot}
SYMBOL res 400 864 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R34
SYMATTR Value {(1-w)*Rpot}
SYMBOL res 368 960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R35
SYMATTR Value 10k
SYMBOL res 992 848 R0
SYMATTR InstName R36
SYMATTR Value {z*Rpot}
SYMBOL res 992 848 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R37
SYMATTR Value {(1-z)*Rpot}
SYMBOL res 1056 432 R0
SYMATTR InstName R38
SYMATTR Value {y*Rpot}
SYMBOL res 1056 432 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R39
SYMATTR Value {(1-y)*Rpot}
SYMBOL res 992 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 10k
SYMBOL e -128 -640 R0
SYMATTR InstName E1
SYMATTR Value 22
SYMBOL res 192 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName TM3
SYMATTR Value 1k
SYMBOL voltage -48 1184 M0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V4
SYMATTR Value EXP(0 12 0 1m 100 0.5)
SYMBOL bv 928 -544 R0
SYMATTR InstName B1
SYMATTR Value V=4*V(out_vcf)*V(ENV_IN)
TEXT 688 -272 Left 2 !.param Rpot=50k
TEXT 688 -248 Left 2 !.param x=0.99
TEXT -1416 -496 Left 2 !;op 0 13 3
TEXT -1416 -464 Left 2 !;ac dec 21 1 100k
TEXT -1424 -432 Left 2 !;dc Vin -1 1 0.01
TEXT -1416 -776 Left 2 ;VCF works\nOpen Loop Performance:\nIfc             fc (Hz)         LF Gain (dB) \n----------------------------\n1u              15              -32 \n10u             78              -22             \n100u            707             -20\n1m              6.87k           -21
TEXT -264 -944 Left 4 ;TB-303 VCF
TEXT 64 224 Left 2 ;TM3 Res trim.
TEXT 728 -392 Left 2 ;RES1
TEXT 792 56 Left 2 ;RES2
TEXT 448 744 Left 2 ;ENV. MOD.
TEXT 752 -88 VLeft 2 ;Ganged
TEXT 1104 712 Left 2 ;ACC
TEXT 1168 296 Left 2 ;CUTOFF FREQ.
TEXT 320 1104 Left 2 ;To VCA
TEXT -1416 -376 Left 2 !.tran 0 13 3
TEXT 1264 528 Left 2 !.param y = {cutoff}
TEXT 1192 856 Left 2 !.param z = 0.5
TEXT 424 1008 Left 2 !.param w = 0.9999
TEXT -1416 -352 Left 2 !;.step param cutoff list 0.1 0.3 0.5 0.7 0.9
TEXT 1264 424 Left 2 ;Y = 1 High cutoff freq\nY = 0 Low cutoff freq
TEXT -1960 256 Left 2 ;Test setting:\n In: Saw 15 msec 12V to 5.5V,. Y = 0.99 (high fg), x = 0.01 (no res), z=0.5, w = 0.5 -> saw out 0.475Vpp\n \nResonace trim:\nCUTOFF FREQ pot at center\nRES1,2 pots at max\nTrim TM3 for 2.5 msec ringing on top of Saw
TEXT -1392 -288 Left 2 !,wave tb303_VCF.wav 16 44.1k V(out)
TEXT 960 -616 Left 2 ;VCA
TEXT 1272 560 Left 2 !.param cutoff = 0.5
TEXT -488 -896 Left 2 ;Has 4-pole roll-off and some resonance but cannot reproduce full TB-303 sounds.\nNot complete, Accent input not implmeneted yet.
TEXT -464 624 Left 2 ;Gimmick
TEXT -448 280 Left 2 ;Expo
TEXT -232 1216 Left 2 ;Env Gen
TEXT 912 -248 Left 2 ;x is resonance pot x = 0...0.999...
TEXT 1552 560 Left 2 ;cutoff sets cutoff frequency, cutoff = 0..0.999...
TEXT 216 1040 Left 2 ;w is Env Mod pot, w = 0..0.999...
TEXT 384 1336 Left 2 ;To be implemented
LINE Normal 768 64 768 -368 2
LINE Normal 768 64 768 64 2
RECTANGLE Normal 672 -240 512 -480 2
RECTANGLE Normal 864 352 624 80 2
RECTANGLE Normal 576 992 384 752 2
RECTANGLE Normal 1168 976 976 736 2
RECTANGLE Normal 1232 560 1040 320 2
